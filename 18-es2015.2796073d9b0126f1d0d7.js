(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{OYrJ:function(l,n,t){"use strict";t.r(n);var u=t("8Y7J");class e{}var i=t("pMnS"),o=t("MKJQ"),r=t("sZkV"),a=t("s7LF"),b=t("SVse"),c=t("mrSG"),s=t("zTOr"),d=t("ccyI"),h=t("hCTW"),g=function(l){return l[l.Registered=0]="Registered",l[l.Closed=1]="Closed",l[l.Pending=2]="Pending",l[l.Full=3]="Full",l[l.Open=4]="Open",l}({});class v{constructor(l,n,t,u,e,i){this.activitiesService=l,this.activatedRoute=n,this.auth=t,this.helper=u,this.alertController=e,this.router=i,this.canUnregister=!1,this.date=Date.now()/1e3}ngOnInit(){return c.a(this,void 0,void 0,(function*(){this.activityId=this.activatedRoute.snapshot.paramMap.get("activity_id"),this.activitiesService.findById(this.activityId).subscribe(l=>c.a(this,void 0,void 0,(function*(){this.activity=l,this.getRegistrations()})))}))}getRegistrations(){return c.a(this,void 0,void 0,(function*(){const l=yield this.auth.getUserId();this.activitiesService.getRegisteredActivities(void 0,this.activityId).subscribe(n=>{this.activity.activeFrom>Date.now()?this.registerStatus=g.Pending:n.items.some(n=>n.userId===l)?(this.registerStatus=g.Registered,this.activity.activeUntil>Date.now()/1e3&&(this.canUnregister=!0)):this.registerStatus=null!=this.activity.startTime&&this.activity.startTime<Date.now()/1e3||null!=this.activity.activeUntil&&this.activity.activeUntil<Date.now()/1e3?g.Closed:null!=this.activity.maxAttendees&&n.items.length>=this.activity.maxAttendees?g.Full:g.Open,this.registration=n.items.find(n=>n.userId===l),null!=this.registration&&this.activitiesService.getRegistration(this.registration.id).subscribe(l=>{this.answers=[],l.answers.forEach(l=>{this.activitiesService.getQuestion(l.questionId).subscribe(n=>{l.question=n.text,l.questionType=n.type,l.questionOrder=n.order,this.answers=this.answers.concat(l),this.answers.sort((l,n)=>l.questionOrder-n.questionOrder)})})})})}))}register(){this.activitiesService.getQuestions(this.activityId,1,20).subscribe(l=>{0!=l.itemCount||0!=this.activity.price&&null!=this.activity.price?this.router.navigateForward("/activities/"+this.activityId+"/register"):this.activitiesService.createRegistration(this.activityId,[]).subscribe(l=>{this.helper.presentToast("Succesvol ingeschreven!",{duration:4e3}),this.router.navigateBack("/activities")},l=>c.a(this,void 0,void 0,(function*(){yield this.helper.presentToast(`Er ging iets mis bij het inschrijven voor de activiteit (${l.error.extra.map(l=>l.code).join(", ")})`,{duration:4e3})})))})}unregister(){return c.a(this,void 0,void 0,(function*(){(yield this.alertController.create({header:"Uitschrijven activiteit",message:"Weet je zeker dat je door wilt gaan met de uitschrijving? Dit kan niet ongedaan worden gemaakt.",buttons:[{text:"Ja",handler:()=>{this.activitiesService.deleteRegistration(this.registration.id).subscribe(l=>{this.getRegistrations(),this.canUnregister=!1,this.helper.presentToast("Succesvol uitgeschreven!",{duration:4e3})})}},{text:"Nee",role:"cancel"}]})).present()}))}}var p=t("iInd"),f=u.mb({encapsulation:0,styles:[[""]],data:{}});function x(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,26,"ion-card",[],null,null,null,o.Y,o.f)),u.nb(1,49152,null,0,r.n,[u.h,u.k,u.x],null,null),(l()(),u.ob(2,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u.ob(3,0,null,0,19,"ion-card-header",[],null,null,null,o.V,o.h)),u.nb(4,49152,null,0,r.p,[u.h,u.k,u.x],null,null),(l()(),u.ob(5,0,null,0,2,"ion-card-title",[],null,null,null,o.X,o.j)),u.nb(6,49152,null,0,r.r,[u.h,u.k,u.x],null,null),(l()(),u.Hb(7,0,[" "," "])),(l()(),u.ob(8,0,null,0,14,"ion-card-subtitle",[],null,null,null,o.W,o.i)),u.nb(9,49152,null,0,r.q,[u.h,u.k,u.x],null,null),(l()(),u.Hb(10,0,[" Locatie: ",""])),(l()(),u.ob(11,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.Hb(12,0,[" Datum/tijd: "," tot ",""])),u.Db(13,2),u.Db(14,2),(l()(),u.ob(15,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.Hb(16,0,[" Inschrijven tot: ",""])),u.Db(17,2),u.Db(18,2),(l()(),u.ob(19,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.Hb(20,0,[" Kosten: ",""])),(l()(),u.ob(21,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.Hb(22,0,[" "," "])),(l()(),u.ob(23,0,null,0,3,"ion-card-content",[],null,null,null,o.U,o.g)),u.nb(24,49152,null,0,r.o,[u.h,u.k,u.x],null,null),(l()(),u.ob(25,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Hb(26,null,["",""]))],null,(function(l,n){var t=n.component;l(n,2,0,t.activity.imageUrl),l(n,7,0,t.activity.title),l(n,10,0,t.activity.location);var e=u.Ib(n,12,0,l(n,13,0,u.Ab(n.parent,0),1e3*t.activity.startTime,"dd/MM HH:mm")),i=u.Ib(n,12,1,l(n,14,0,u.Ab(n.parent,0),1e3*t.activity.endTime,"dd/MM HH:mm"));l(n,12,0,e,i);var o=u.Ib(n,16,0,null!=t.activity.activeUntil?l(n,17,0,u.Ab(n.parent,0),1e3*t.activity.activeUntil,"dd/MM HH:mm"):l(n,18,0,u.Ab(n.parent,0),1e3*t.activity.startTime,"dd/MM HH:mm"));l(n,16,0,o),l(n,20,0,t.activity.price?"\u20ac"+t.activity.price:"gratis"),l(n,22,0,null==t.activity.maxAttendees?"Er is geen maximaal aantal deelnemers.":"Maximaal aantal deelnemers: "+t.activity.maxAttendees),l(n,26,0,t.activity.description)}))}function y(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,3,"ion-input",[["readonly",""],["type","text"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Ab(l,3)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Ab(l,3)._handleInputEvent(t.target)&&e),e}),o.ib,o.t)),u.Eb(5120,null,a.g,(function(l){return[l]}),[r.Mb]),u.nb(2,49152,null,0,r.H,[u.h,u.k,u.x],{readonly:[0,"readonly"],type:[1,"type"],value:[2,"value"]},null),u.nb(3,16384,null,0,r.Mb,[u.k],null,null)],(function(l,n){l(n,2,0,"","text",n.parent.context.$implicit.text)}),null)}function k(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,3,"ion-textarea",[["readonly",""],["type","text"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Ab(l,3)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Ab(l,3)._handleInputEvent(t.target)&&e),e}),o.Ab,o.L)),u.Eb(5120,null,a.g,(function(l){return[l]}),[r.Mb]),u.nb(2,49152,null,0,r.wb,[u.h,u.k,u.x],{readonly:[0,"readonly"],value:[1,"value"]},null),u.nb(3,16384,null,0,r.Mb,[u.k],null,null)],(function(l,n){l(n,2,0,"",n.parent.context.$implicit.text)}),null)}function m(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,3,"ion-input",[["readonly",""],["type","number"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Ab(l,3)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Ab(l,3)._handleIonChange(t.target)&&e),e}),o.ib,o.t)),u.Eb(5120,null,a.g,(function(l){return[l]}),[r.Hb]),u.nb(2,49152,null,0,r.H,[u.h,u.k,u.x],{readonly:[0,"readonly"],type:[1,"type"],value:[2,"value"]},null),u.nb(3,16384,null,0,r.Hb,[u.k],null,null)],(function(l,n){l(n,2,0,"","number",n.parent.context.$implicit.text)}),null)}function I(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,3,"ion-checkbox",[["disabled",""],["slot","start"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Ab(l,3)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Ab(l,3)._handleIonChange(t.target)&&e),e}),o.Z,o.k)),u.Eb(5120,null,a.g,(function(l){return[l]}),[r.d]),u.nb(2,49152,null,0,r.s,[u.h,u.k,u.x],{checked:[0,"checked"],disabled:[1,"disabled"]},null),u.nb(3,16384,null,0,r.d,[u.k],null,null)],(function(l,n){l(n,2,0,"1"===n.parent.context.$implicit.text,"")}),null)}function w(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,14,"ion-item",[["class","show-disabled"]],null,null,null,o.jb,o.u)),u.nb(1,49152,null,0,r.I,[u.h,u.k,u.x],null,null),(l()(),u.ob(2,0,null,0,12,"ion-label",[],null,null,null,o.kb,o.v)),u.nb(3,16384,null,0,b.m,[],{ngSwitch:[0,"ngSwitch"]},null),u.nb(4,49152,null,0,r.O,[u.h,u.k,u.x],null,null),(l()(),u.ob(5,0,null,0,1,"h5",[],null,null,null,null,null)),(l()(),u.Hb(6,null,["",""])),(l()(),u.eb(16777216,null,0,1,null,y)),u.nb(8,278528,null,0,b.n,[u.M,u.J,b.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u.eb(16777216,null,0,1,null,k)),u.nb(10,278528,null,0,b.n,[u.M,u.J,b.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u.eb(16777216,null,0,1,null,m)),u.nb(12,278528,null,0,b.n,[u.M,u.J,b.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),u.eb(16777216,null,0,1,null,I)),u.nb(14,278528,null,0,b.n,[u.M,u.J,b.m],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(l,n){l(n,3,0,n.context.$implicit.questionType),l(n,8,0,0),l(n,10,0,1),l(n,12,0,2),l(n,14,0,3)}),(function(l,n){l(n,6,0,n.context.$implicit.question)}))}function J(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,12,"ion-card",[],null,null,null,o.Y,o.f)),u.nb(1,49152,null,0,r.n,[u.h,u.k,u.x],null,null),(l()(),u.ob(2,0,null,0,4,"ion-card-header",[],null,null,null,o.V,o.h)),u.nb(3,49152,null,0,r.p,[u.h,u.k,u.x],null,null),(l()(),u.ob(4,0,null,0,2,"ion-card-title",[],null,null,null,o.X,o.j)),u.nb(5,49152,null,0,r.r,[u.h,u.k,u.x],null,null),(l()(),u.Hb(-1,0,["Inschrijving informatie"])),(l()(),u.ob(7,0,null,0,5,"ion-card-content",[],null,null,null,o.U,o.g)),u.nb(8,49152,null,0,r.o,[u.h,u.k,u.x],null,null),(l()(),u.ob(9,0,null,0,3,"ion-list",[["lines","none"]],null,null,null,o.mb,o.w)),u.nb(10,49152,null,0,r.P,[u.h,u.k,u.x],{lines:[0,"lines"]},null),(l()(),u.eb(16777216,null,0,1,null,w)),u.nb(12,278528,null,0,b.i,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component;l(n,10,0,"none"),l(n,12,0,t.answers)}),null)}function S(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,2,"ion-button",[["color","success"],["expand","block"]],null,null,null,o.S,o.d)),u.nb(1,49152,null,0,r.l,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(l()(),u.Hb(-1,0,["Succesvol ingeschreven"]))],(function(l,n){l(n,1,0,"success",1,"block")}),null)}function H(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,2,"ion-button",[["color","danger"],["expand","block"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.unregister()&&u),u}),o.S,o.d)),u.nb(1,49152,null,0,r.l,[u.h,u.k,u.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),u.Hb(-1,0,["Uitschrijven"]))],(function(l,n){l(n,1,0,"danger","block")}),null)}function M(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,2,"ion-button",[["color","danger"],["expand","block"]],null,null,null,o.S,o.d)),u.nb(1,49152,null,0,r.l,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(l()(),u.Hb(-1,0,["Inschrijving gesloten"]))],(function(l,n){l(n,1,0,"danger",1,"block")}),null)}function C(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,2,"ion-button",[["color","warning"],["expand","block"]],null,null,null,o.S,o.d)),u.nb(1,49152,null,0,r.l,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(l()(),u.Hb(-1,0,["Inschrijving nog niet open"]))],(function(l,n){l(n,1,0,"warning",1,"block")}),null)}function j(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,2,"ion-button",[["color","danger"],["expand","block"]],null,null,null,o.S,o.d)),u.nb(1,49152,null,0,r.l,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(l()(),u.Hb(-1,0,["Inschrijving vol"]))],(function(l,n){l(n,1,0,"danger",1,"block")}),null)}function A(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.register()&&u),u}),o.S,o.d)),u.nb(1,49152,null,0,r.l,[u.h,u.k,u.x],{expand:[0,"expand"]},null),(l()(),u.Hb(-1,0,["Inschrijven"]))],(function(l,n){l(n,1,0,"block")}),null)}function B(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,12,"section",[["class","ion-padding"]],null,null,null,null,null)),(l()(),u.eb(16777216,null,null,1,null,S)),u.nb(2,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,null,1,null,H)),u.nb(4,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,null,1,null,M)),u.nb(6,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,null,1,null,C)),u.nb(8,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,null,1,null,j)),u.nb(10,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,null,1,null,A)),u.nb(12,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,2,0,0==t.registerStatus),l(n,4,0,t.canUnregister),l(n,6,0,1==t.registerStatus),l(n,8,0,2==t.registerStatus),l(n,10,0,3==t.registerStatus),l(n,12,0,4==t.registerStatus)}),null)}function E(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,10,"ion-grid",[],null,null,null,o.db,o.o)),u.nb(1,49152,null,0,r.B,[u.h,u.k,u.x],null,null),(l()(),u.ob(2,0,null,0,8,"ion-row",[],null,null,null,o.qb,o.B)),u.nb(3,49152,null,0,r.hb,[u.h,u.k,u.x],null,null),(l()(),u.ob(4,0,null,0,6,"ion-col",[],null,null,null,o.ab,o.l)),u.nb(5,49152,null,0,r.u,[u.h,u.k,u.x],null,null),(l()(),u.ob(6,0,null,0,4,"div",[["class","ion-text-center"]],null,null,null,null,null)),(l()(),u.ob(7,0,null,null,1,"h6",[],null,null,null,null,null)),(l()(),u.Hb(-1,null,["Activiteit wordt opgehaald"])),(l()(),u.ob(9,0,null,null,1,"ion-spinner",[],null,null,null,o.vb,o.G)),u.nb(10,49152,null,0,r.qb,[u.h,u.k,u.x],null,null)],null,null)}function U(l){return u.Jb(0,[u.Cb(0,b.d,[u.s]),(l()(),u.ob(1,0,null,null,11,"ion-header",[],null,null,null,o.eb,o.p)),u.nb(2,49152,null,0,r.C,[u.h,u.k,u.x],{translucent:[0,"translucent"]},null),(l()(),u.ob(3,0,null,0,9,"ion-toolbar",[],null,null,null,o.Db,o.O)),u.nb(4,49152,null,0,r.Ab,[u.h,u.k,u.x],null,null),(l()(),u.ob(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,o.T,o.e)),u.nb(6,49152,null,0,r.m,[u.h,u.k,u.x],null,null),(l()(),u.ob(7,0,null,0,2,"ion-back-button",[["defaultHref","home"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==u.Ab(l,9).onClick(t)&&e),e}),o.R,o.c)),u.nb(8,49152,null,0,r.h,[u.h,u.k,u.x],{defaultHref:[0,"defaultHref"]},null),u.nb(9,16384,null,0,r.i,[[2,r.gb],r.Gb],{defaultHref:[0,"defaultHref"]},null),(l()(),u.ob(10,0,null,0,2,"ion-title",[],null,null,null,o.Bb,o.M)),u.nb(11,49152,null,0,r.yb,[u.h,u.k,u.x],null,null),(l()(),u.Hb(-1,0,[" Activiteit "])),(l()(),u.ob(13,0,null,null,15,"ion-content",[],null,null,null,o.bb,o.m)),u.nb(14,49152,null,0,r.v,[u.h,u.k,u.x],null,null),(l()(),u.ob(15,0,null,0,6,"ion-header",[["collapse","condense"]],null,null,null,o.eb,o.p)),u.nb(16,49152,null,0,r.C,[u.h,u.k,u.x],{collapse:[0,"collapse"]},null),(l()(),u.ob(17,0,null,0,4,"ion-toolbar",[],null,null,null,o.Db,o.O)),u.nb(18,49152,null,0,r.Ab,[u.h,u.k,u.x],null,null),(l()(),u.ob(19,0,null,0,2,"ion-title",[["size","large"]],null,null,null,o.Bb,o.M)),u.nb(20,49152,null,0,r.yb,[u.h,u.k,u.x],{size:[0,"size"]},null),(l()(),u.Hb(-1,0,["Activiteit"])),(l()(),u.eb(16777216,null,0,1,null,x)),u.nb(23,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.eb(16777216,null,0,1,null,J)),u.nb(25,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,0,1,null,B)),u.nb(27,16384,null,0,b.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(0,[["loading",2]],0,0,null,E))],(function(l,n){var t=n.component;l(n,2,0,!0),l(n,8,0,"home"),l(n,9,0,"home"),l(n,16,0,"condense"),l(n,20,0,"large"),l(n,23,0,null!=t.activity,u.Ab(n,28)),l(n,25,0,t.answers&&t.answers.length>0),l(n,27,0,t.activity)}),null)}function O(l){return u.Jb(0,[(l()(),u.ob(0,0,null,null,1,"app-activity",[],null,null,null,U,f)),u.nb(1,114688,null,0,v,[s.a,p.a,d.b,h.a,r.b,r.Gb],null,null)],(function(l,n){l(n,1,0)}),null)}var R=u.kb("app-activity",v,O,{},{},[]);const D=()=>t.e(19).then(t.bind(null,"lZMm")).then(l=>l.RegisterPageModuleNgFactory);class T{}t.d(n,"ActivityPageModuleNgFactory",(function(){return q}));var q=u.lb(e,[],(function(l){return u.xb([u.yb(512,u.j,u.X,[[8,[i.a,R]],[3,u.j],u.v]),u.yb(4608,b.l,b.k,[u.s,[2,b.u]]),u.yb(4608,a.o,a.o,[]),u.yb(4608,r.c,r.c,[u.x,u.g]),u.yb(4608,r.Fb,r.Fb,[r.c,u.j,u.p]),u.yb(4608,r.Jb,r.Jb,[r.c,u.j,u.p]),u.yb(1073742336,b.b,b.b,[]),u.yb(1073742336,a.n,a.n,[]),u.yb(1073742336,a.f,a.f,[]),u.yb(1073742336,r.Cb,r.Cb,[]),u.yb(1073742336,p.o,p.o,[[2,p.t],[2,p.m]]),u.yb(1073742336,T,T,[]),u.yb(1073742336,e,e,[]),u.yb(1024,p.k,(function(){return[[{path:"",component:v},{path:"register",loadChildren:D}]]}),[])])}))}}]);