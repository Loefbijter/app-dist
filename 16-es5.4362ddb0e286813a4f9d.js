function _toConsumableArray(n){return _arrayWithoutHoles(n)||_iterableToArray(n)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function _arrayWithoutHoles(n){if(Array.isArray(n)){for(var l=0,t=new Array(n.length);l<n.length;l++)t[l]=n[l];return t}}function _defineProperties(n,l){for(var t=0;t<l.length;t++){var e=l[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,l,t){return l&&_defineProperties(n.prototype,l),t&&_defineProperties(n,t),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ciXO:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J"),i=function n(){_classCallCheck(this,n)},u=t("pMnS"),o=t("MKJQ"),r=t("sZkV"),a=t("iInd"),c=t("SVse"),s=t("s7LF"),b=t("zTOr"),h=t("ccyI"),v=function(){function n(l,t){_classCallCheck(this,n),this.activitiesService=l,this.auth=t,this.activities=[],this.registeredActivities=[],this.page=1,this.showPast=!1}return _createClass(n,[{key:"ionViewWillEnter",value:function(){var n=this;this.auth.getUserId().then((function(l){return n.userId=l})),this.reloadActivities()}},{key:"nextPage",value:function(){var n=this;return this.page++,new Promise((function(l,t){n.activitiesService.getPage(n.showPast,n.page,n.showPast?"DESC":"ASC").subscribe((function(t){var e=t.items;n.activities=n.activities.concat(e);var i=!0,u=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var c=r.value;n.activitiesService.getRegisteredActivities(void 0,c.id).subscribe((function(l){var t;l&&(t=n.registeredActivities).push.apply(t,_toConsumableArray(l.items))}))}}catch(s){u=!0,o=s}finally{try{i||null==a.return||a.return()}finally{if(u)throw o}}l(t)}),(function(n){t(n)}))}))}},{key:"canRegister",value:function(n){var l=this;return n.activeFrom<=Date.now()/1e3&&n.startTime>Date.now()/1e3&&(null==n.maxAttendees||this.registeredActivities.filter((function(l){return l.activityId===n.id})).length<n.maxAttendees)&&!this.registeredActivities.some((function(t){return t.activityId===n.id&&t.userId===l.userId}))}},{key:"isRegistered",value:function(n){var l=this;return this.registeredActivities.some((function(t){return t.activityId===n.id&&t.userId===l.userId}))}},{key:"reloadActivities",value:function(){var n=this;return new Promise((function(l,t){null!=n.infiniteScrollTarget&&(n.infiniteScrollTarget.disabled=!1),n.activities=[],n.page=0,n.nextPage().then((function(){l()})).catch((function(n){t(n)}))}))}},{key:"loadData",value:function(n){var l=this;this.nextPage().then((function(t){l.infiniteScrollTarget=n.target,n.target.complete(),t.totalItems<=l.activities.length&&(n.target.disabled=!0)}))}},{key:"changeTimeFrame",value:function(n){switch(n.detail.value){case"soon":this.showPast=!1;break;case"all":this.showPast=!0}this.reloadActivities()}}]),n}(),f=e.mb({encapsulation:0,styles:[["ion-segment-button[_ngcontent-%COMP%]{flex-basis:0}"]],data:{}});function d(n){return e.Jb(0,[(n()(),e.ob(0,0,null,null,2,"ion-button",[["color","success"],["disabled","true"]],null,null,null,o.S,o.d)),e.nb(1,49152,null,0,r.l,[e.h,e.k,e.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(n()(),e.Hb(-1,0,["Ingeschreven"]))],(function(n,l){n(l,1,0,"success","true")}),null)}function g(n){return e.Jb(0,[(n()(),e.ob(0,0,null,null,4,"ion-button",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Ab(n,2).onClick()&&i),"click"===l&&(i=!1!==e.Ab(n,3).onClick(t)&&i),i}),o.S,o.d)),e.nb(1,49152,null,0,r.l,[e.h,e.k,e.x],null,null),e.nb(2,16384,null,0,a.n,[a.m,a.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.nb(3,737280,null,0,r.Kb,[c.h,r.Gb,e.k,a.m,[2,a.n]],null,null),(n()(),e.Hb(-1,0,["Meer info & inschrijven"]))],(function(n,l){n(l,2,0,l.parent.context.$implicit.id),n(l,3,0)}),null)}function k(n){return e.Jb(0,[(n()(),e.ob(0,0,null,null,4,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Ab(n,2).onClick()&&i),"click"===l&&(i=!1!==e.Ab(n,3).onClick(t)&&i),i}),o.S,o.d)),e.nb(1,49152,null,0,r.l,[e.h,e.k,e.x],{color:[0,"color"]},null),e.nb(2,16384,null,0,a.n,[a.m,a.a,[8,null],e.B,e.k],{routerLink:[0,"routerLink"]},null),e.nb(3,737280,null,0,r.Kb,[c.h,r.Gb,e.k,a.m,[2,a.n]],null,null),(n()(),e.Hb(-1,0,["Meer info"]))],(function(n,l){n(l,1,0,"medium"),n(l,2,0,l.parent.context.$implicit.id),n(l,3,0)}),null)}function y(n){return e.Jb(0,[(n()(),e.ob(0,0,null,null,21,"ion-list",[],null,null,null,o.mb,o.w)),e.nb(1,49152,null,0,r.P,[e.h,e.k,e.x],null,null),(n()(),e.ob(2,0,null,0,19,"ion-card",[],null,null,null,o.Y,o.f)),e.nb(3,49152,null,0,r.n,[e.h,e.k,e.x],null,null),(n()(),e.ob(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),e.ob(5,0,null,0,8,"ion-card-header",[],null,null,null,o.V,o.h)),e.nb(6,49152,null,0,r.p,[e.h,e.k,e.x],null,null),(n()(),e.ob(7,0,null,0,2,"ion-card-title",[],null,null,null,o.X,o.j)),e.nb(8,49152,null,0,r.r,[e.h,e.k,e.x],null,null),(n()(),e.Hb(9,0,["",""])),(n()(),e.ob(10,0,null,0,3,"ion-card-subtitle",[],null,null,null,o.W,o.i)),e.nb(11,49152,null,0,r.q,[e.h,e.k,e.x],null,null),(n()(),e.Hb(12,0,["",""])),e.Db(13,1),(n()(),e.ob(14,0,null,0,7,"ion-card-content",[],null,null,null,o.U,o.g)),e.nb(15,49152,null,0,r.o,[e.h,e.k,e.x],null,null),(n()(),e.eb(16777216,null,0,1,null,d)),e.nb(17,16384,null,0,c.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(n()(),e.eb(16777216,null,0,1,null,g)),e.nb(19,16384,null,0,c.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(n()(),e.eb(16777216,null,0,1,null,k)),e.nb(21,16384,null,0,c.j,[e.M,e.J],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,17,0,t.isRegistered(l.context.$implicit)),n(l,19,0,t.canRegister(l.context.$implicit)),n(l,21,0,!t.canRegister(l.context.$implicit))}),(function(n,l){n(l,4,0,l.context.$implicit.imageUrl),n(l,9,0,l.context.$implicit.title);var t=e.Ib(l,12,0,n(l,13,0,e.Ab(l.parent,0),1e3*l.context.$implicit.startTime));n(l,12,0,t)}))}function p(n){return e.Jb(0,[e.Cb(0,c.d,[e.s]),(n()(),e.ob(1,0,null,null,26,"ion-header",[],null,null,null,o.eb,o.p)),e.nb(2,49152,null,0,r.C,[e.h,e.k,e.x],{translucent:[0,"translucent"]},null),(n()(),e.ob(3,0,null,0,8,"ion-toolbar",[],null,null,null,o.Db,o.O)),e.nb(4,49152,null,0,r.Ab,[e.h,e.k,e.x],null,null),(n()(),e.ob(5,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,o.T,o.e)),e.nb(6,49152,null,0,r.m,[e.h,e.k,e.x],null,null),(n()(),e.ob(7,0,null,0,1,"ion-menu-button",[["autoHide","false"]],null,null,null,o.nb,o.z)),e.nb(8,49152,null,0,r.S,[e.h,e.k,e.x],{autoHide:[0,"autoHide"]},null),(n()(),e.ob(9,0,null,0,2,"ion-title",[],null,null,null,o.Bb,o.M)),e.nb(10,49152,null,0,r.yb,[e.h,e.k,e.x],null,null),(n()(),e.Hb(-1,0,[" Activiteiten "])),(n()(),e.ob(12,0,null,0,15,"ion-toolbar",[],null,null,null,o.Db,o.O)),e.nb(13,49152,null,0,r.Ab,[e.h,e.k,e.x],null,null),(n()(),e.ob(14,0,null,0,13,"ion-segment",[["value","soon"]],null,[[null,"ionChange"],[null,"ionBlur"]],(function(n,l,t){var i=!0,u=n.component;return"ionBlur"===l&&(i=!1!==e.Ab(n,17)._handleBlurEvent(t.target)&&i),"ionChange"===l&&(i=!1!==e.Ab(n,17)._handleChangeEvent(t.target)&&i),"ionChange"===l&&(i=!1!==u.changeTimeFrame(t)&&i),i}),o.sb,o.C)),e.Eb(5120,null,s.g,(function(n){return[n]}),[r.Lb]),e.nb(16,49152,null,0,r.jb,[e.h,e.k,e.x],{value:[0,"value"]},null),e.nb(17,16384,null,0,r.Lb,[e.k],null,null),(n()(),e.ob(18,0,null,0,4,"ion-segment-button",[["value","soon"]],null,null,null,o.rb,o.D)),e.nb(19,49152,null,0,r.kb,[e.h,e.k,e.x],{value:[0,"value"]},null),(n()(),e.ob(20,0,null,0,2,"ion-label",[],null,null,null,o.kb,o.v)),e.nb(21,49152,null,0,r.O,[e.h,e.k,e.x],null,null),(n()(),e.Hb(-1,0,["Binnenkort"])),(n()(),e.ob(23,0,null,0,4,"ion-segment-button",[["value","all"]],null,null,null,o.rb,o.D)),e.nb(24,49152,null,0,r.kb,[e.h,e.k,e.x],{value:[0,"value"]},null),(n()(),e.ob(25,0,null,0,2,"ion-label",[],null,null,null,o.kb,o.v)),e.nb(26,49152,null,0,r.O,[e.h,e.k,e.x],null,null),(n()(),e.Hb(-1,0,["Alle"])),(n()(),e.ob(28,0,null,null,7,"ion-content",[],null,null,null,o.bb,o.m)),e.nb(29,49152,null,0,r.v,[e.h,e.k,e.x],null,null),(n()(),e.eb(16777216,null,0,1,null,y)),e.nb(31,278528,null,0,c.i,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.ob(32,0,null,0,3,"ion-infinite-scroll",[["threshold","5%"]],null,[[null,"ionInfinite"]],(function(n,l,t){var e=!0;return"ionInfinite"===l&&(e=!1!==n.component.loadData(t)&&e),e}),o.hb,o.r)),e.nb(33,49152,null,0,r.F,[e.h,e.k,e.x],{threshold:[0,"threshold"]},null),(n()(),e.ob(34,0,null,0,1,"ion-infinite-scroll-content",[["loadingText","Meer activiteiten aan het ophalen"]],null,null,null,o.gb,o.s)),e.nb(35,49152,null,0,r.G,[e.h,e.k,e.x],{loadingText:[0,"loadingText"]},null)],(function(n,l){var t=l.component;n(l,2,0,!0),n(l,8,0,"false"),n(l,16,0,"soon"),n(l,19,0,"soon"),n(l,24,0,"all"),n(l,31,0,t.activities),n(l,33,0,"5%"),n(l,35,0,"Meer activiteiten aan het ophalen")}),null)}var m=e.kb("app-activities",v,(function(n){return e.Jb(0,[(n()(),e.ob(0,0,null,null,1,"app-activities",[],null,null,null,p,f)),e.nb(1,49152,null,0,v,[b.a,h.b],null,null)],null,null)}),{},{},[]),x=function(){return t.e(18).then(t.bind(null,"OYrJ")).then((function(n){return n.ActivityPageModuleNgFactory}))},A=function n(){_classCallCheck(this,n)};t.d(l,"ActivitiesPageModuleNgFactory",(function(){return C}));var C=e.lb(i,[],(function(n){return e.xb([e.yb(512,e.j,e.X,[[8,[u.a,m]],[3,e.j],e.v]),e.yb(4608,c.l,c.k,[e.s,[2,c.u]]),e.yb(4608,s.o,s.o,[]),e.yb(4608,r.c,r.c,[e.x,e.g]),e.yb(4608,r.Fb,r.Fb,[r.c,e.j,e.p]),e.yb(4608,r.Jb,r.Jb,[r.c,e.j,e.p]),e.yb(1073742336,c.b,c.b,[]),e.yb(1073742336,s.n,s.n,[]),e.yb(1073742336,s.f,s.f,[]),e.yb(1073742336,r.Cb,r.Cb,[]),e.yb(1073742336,a.o,a.o,[[2,a.t],[2,a.m]]),e.yb(1073742336,A,A,[]),e.yb(1073742336,i,i,[]),e.yb(1024,a.k,(function(){return[[{path:"",component:v},{path:":activity_id",loadChildren:x}]]}),[])])}))},zTOr:function(n,l,t){"use strict";t.d(l,"a",(function(){return o}));var e=t("AytR"),i=t("8Y7J"),u=t("IheW"),o=function(){var n=function(){function n(l){_classCallCheck(this,n),this.http=l,this.url=e.a.API_URL}return _createClass(n,[{key:"getPage",value:function(n,l){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ASC",e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return this.http.get("".concat(this.url,"activities?page=").concat(l,"&limit=").concat(e,"&showFuture=false&showPast=").concat(n,"&sortOrder=").concat(t))}},{key:"findById",value:function(n){return this.http.get("".concat(this.url,"activities/").concat(n))}},{key:"getQuestions",value:function(n,l){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return this.http.get("".concat(this.url,"activity-questions?activity=").concat(n,"&page=").concat(l,"&limit=").concat(t))}},{key:"getQuestion",value:function(n){return this.http.get("".concat(this.url,"activity-questions/").concat(n))}},{key:"getRegistration",value:function(n){return this.http.get("".concat(this.url,"activity-registrations/").concat(n))}},{key:"getTotalQuestions",value:function(n){return this.http.get("".concat(this.url,"activity-questions?activity=").concat(n,"&limit=0"))}},{key:"createRegistration",value:function(n,l){return this.http.post(this.url+"activity-registrations",{activityId:n,answers:l})}},{key:"deleteRegistration",value:function(n){return this.http.delete(this.url+"activity-registrations/"+n)}},{key:"getRegisteredActivities",value:function(n,l){var t=this.url+"activity-registrations",e=[];return null!=n&&e.push("user="+n),null!=l&&e.push("activity="+l),e.push("limit=1"),e.length>0&&(t+="?"+e.join("&")),this.http.get(t)}}]),n}();return n.ngInjectableDef=i.Nb({factory:function(){return new n(i.Ob(u.c))},token:n,providedIn:"root"}),n}()}}]);