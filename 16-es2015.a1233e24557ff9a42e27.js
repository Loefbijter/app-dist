(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ciXO:function(l,n,t){"use strict";t.r(n);var i=t("8Y7J");class e{}var u=t("pMnS"),o=t("MKJQ"),s=t("sZkV"),r=t("iInd"),a=t("SVse"),b=t("s7LF"),c=t("zTOr"),h=t("ccyI");class g{constructor(l,n){this.activitiesService=l,this.auth=n,this.activities=[],this.registeredActivities=[],this.page=1,this.showPast=!1}ionViewWillEnter(){this.auth.getUserId().then(l=>this.userId=l),this.reloadActivities()}nextPage(){return this.page++,new Promise((l,n)=>{this.activitiesService.getPage(this.showPast,this.page,this.showPast?"DESC":"ASC").subscribe(n=>{const t=n.items;this.activities=this.activities.concat(t);for(const l of t)this.activitiesService.getRegisteredActivities(void 0,l.id).subscribe(l=>{l&&this.registeredActivities.push(...l.items)});l(n)},l=>{n(l)})})}canRegister(l){return l.activeFrom<=Date.now()/1e3&&l.startTime>Date.now()/1e3&&(null==l.maxAttendees||this.registeredActivities.filter(n=>n.activityId===l.id).length<l.maxAttendees)&&!this.registeredActivities.some(n=>n.activityId===l.id&&n.userId===this.userId)}reloadActivities(){return new Promise((l,n)=>{null!=this.infiniteScrollTarget&&(this.infiniteScrollTarget.disabled=!1),this.activities=[],this.page=0,this.nextPage().then(()=>{l()}).catch(l=>{n(l)})})}loadData(l){this.nextPage().then(n=>{this.infiniteScrollTarget=l.target,l.target.complete(),n.totalItems<=this.activities.length&&(l.target.disabled=!0)})}changeTimeFrame(l){switch(l.detail.value){case"soon":this.showPast=!1;break;case"all":this.showPast=!0}this.reloadActivities()}}var v=i.mb({encapsulation:0,styles:[["ion-segment-button[_ngcontent-%COMP%]{flex-basis:0}"]],data:{}});function d(l){return i.Jb(0,[(l()(),i.ob(0,0,null,null,2,"ion-button",[],null,null,null,o.V,o.d)),i.nb(1,49152,null,0,s.l,[i.h,i.k,i.x],null,null),(l()(),i.Hb(-1,0,["Meer info & inschrijven"]))],null,null)}function p(l){return i.Jb(0,[(l()(),i.ob(0,0,null,null,2,"ion-button",[["color","medium"]],null,null,null,o.V,o.d)),i.nb(1,49152,null,0,s.l,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.Hb(-1,0,["Meer info"]))],(function(l,n){l(n,1,0,"medium")}),null)}function f(l){return i.Jb(0,[(l()(),i.ob(0,0,null,null,21,"ion-list",[],null,null,null,o.sb,o.z)),i.nb(1,49152,null,0,s.P,[i.h,i.k,i.x],null,null),(l()(),i.ob(2,0,null,0,19,"ion-card",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==i.Ab(l,4).onClick()&&e),"click"===n&&(e=!1!==i.Ab(l,5).onClick(t)&&e),e}),o.bb,o.f)),i.nb(3,49152,null,0,s.n,[i.h,i.k,i.x],null,null),i.nb(4,16384,null,0,r.n,[r.m,r.a,[8,null],i.B,i.k],{routerLink:[0,"routerLink"]},null),i.nb(5,737280,null,0,s.Kb,[a.h,s.Gb,i.k,r.m,[2,r.n]],null,null),(l()(),i.ob(6,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),i.ob(7,0,null,0,8,"ion-card-header",[],null,null,null,o.Y,o.h)),i.nb(8,49152,null,0,s.p,[i.h,i.k,i.x],null,null),(l()(),i.ob(9,0,null,0,2,"ion-card-title",[],null,null,null,o.ab,o.j)),i.nb(10,49152,null,0,s.r,[i.h,i.k,i.x],null,null),(l()(),i.Hb(11,0,["",""])),(l()(),i.ob(12,0,null,0,3,"ion-card-subtitle",[],null,null,null,o.Z,o.i)),i.nb(13,49152,null,0,s.q,[i.h,i.k,i.x],null,null),(l()(),i.Hb(14,0,["",""])),i.Db(15,1),(l()(),i.ob(16,0,null,0,5,"ion-card-content",[],null,null,null,o.X,o.g)),i.nb(17,49152,null,0,s.o,[i.h,i.k,i.x],null,null),(l()(),i.eb(16777216,null,0,1,null,d)),i.nb(19,16384,null,0,a.j,[i.M,i.J],{ngIf:[0,"ngIf"]},null),(l()(),i.eb(16777216,null,0,1,null,p)),i.nb(21,16384,null,0,a.j,[i.M,i.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,4,0,n.context.$implicit.id),l(n,5,0),l(n,19,0,t.canRegister(n.context.$implicit)),l(n,21,0,!t.canRegister(n.context.$implicit))}),(function(l,n){l(n,6,0,n.context.$implicit.imageUrl),l(n,11,0,n.context.$implicit.title);var t=i.Ib(n,14,0,l(n,15,0,i.Ab(n.parent,0),1e3*n.context.$implicit.startTime));l(n,14,0,t)}))}function m(l){return i.Jb(0,[i.Cb(0,a.d,[i.s]),(l()(),i.ob(1,0,null,null,26,"ion-header",[],null,null,null,o.hb,o.p)),i.nb(2,49152,null,0,s.C,[i.h,i.k,i.x],{translucent:[0,"translucent"]},null),(l()(),i.ob(3,0,null,0,8,"ion-toolbar",[],null,null,null,o.Jb,o.R)),i.nb(4,49152,null,0,s.Ab,[i.h,i.k,i.x],null,null),(l()(),i.ob(5,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,o.W,o.e)),i.nb(6,49152,null,0,s.m,[i.h,i.k,i.x],null,null),(l()(),i.ob(7,0,null,0,1,"ion-menu-button",[["autoHide","false"]],null,null,null,o.tb,o.C)),i.nb(8,49152,null,0,s.S,[i.h,i.k,i.x],{autoHide:[0,"autoHide"]},null),(l()(),i.ob(9,0,null,0,2,"ion-title",[],null,null,null,o.Hb,o.P)),i.nb(10,49152,null,0,s.yb,[i.h,i.k,i.x],null,null),(l()(),i.Hb(-1,0,[" Activiteiten "])),(l()(),i.ob(12,0,null,0,15,"ion-toolbar",[],null,null,null,o.Jb,o.R)),i.nb(13,49152,null,0,s.Ab,[i.h,i.k,i.x],null,null),(l()(),i.ob(14,0,null,0,13,"ion-segment",[["value","soon"]],null,[[null,"ionChange"],[null,"ionBlur"]],(function(l,n,t){var e=!0,u=l.component;return"ionBlur"===n&&(e=!1!==i.Ab(l,17)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==i.Ab(l,17)._handleChangeEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.changeTimeFrame(t)&&e),e}),o.yb,o.F)),i.Eb(5120,null,b.g,(function(l){return[l]}),[s.Lb]),i.nb(16,49152,null,0,s.jb,[i.h,i.k,i.x],{value:[0,"value"]},null),i.nb(17,16384,null,0,s.Lb,[i.k],null,null),(l()(),i.ob(18,0,null,0,4,"ion-segment-button",[["value","soon"]],null,null,null,o.xb,o.G)),i.nb(19,49152,null,0,s.kb,[i.h,i.k,i.x],{value:[0,"value"]},null),(l()(),i.ob(20,0,null,0,2,"ion-label",[],null,null,null,o.qb,o.y)),i.nb(21,49152,null,0,s.O,[i.h,i.k,i.x],null,null),(l()(),i.Hb(-1,0,["Binnenkort"])),(l()(),i.ob(23,0,null,0,4,"ion-segment-button",[["value","all"]],null,null,null,o.xb,o.G)),i.nb(24,49152,null,0,s.kb,[i.h,i.k,i.x],{value:[0,"value"]},null),(l()(),i.ob(25,0,null,0,2,"ion-label",[],null,null,null,o.qb,o.y)),i.nb(26,49152,null,0,s.O,[i.h,i.k,i.x],null,null),(l()(),i.Hb(-1,0,["Alle"])),(l()(),i.ob(28,0,null,null,7,"ion-content",[],null,null,null,o.eb,o.m)),i.nb(29,49152,null,0,s.v,[i.h,i.k,i.x],null,null),(l()(),i.eb(16777216,null,0,1,null,f)),i.nb(31,278528,null,0,a.i,[i.M,i.J,i.q],{ngForOf:[0,"ngForOf"]},null),(l()(),i.ob(32,0,null,0,3,"ion-infinite-scroll",[["threshold","5%"]],null,[[null,"ionInfinite"]],(function(l,n,t){var i=!0;return"ionInfinite"===n&&(i=!1!==l.component.loadData(t)&&i),i}),o.kb,o.r)),i.nb(33,49152,null,0,s.F,[i.h,i.k,i.x],{threshold:[0,"threshold"]},null),(l()(),i.ob(34,0,null,0,1,"ion-infinite-scroll-content",[["loadingText","Meer activiteiten aan het ophalen"]],null,null,null,o.jb,o.s)),i.nb(35,49152,null,0,s.G,[i.h,i.k,i.x],{loadingText:[0,"loadingText"]},null)],(function(l,n){var t=n.component;l(n,2,0,!0),l(n,8,0,"false"),l(n,16,0,"soon"),l(n,19,0,"soon"),l(n,24,0,"all"),l(n,31,0,t.activities),l(n,33,0,"5%"),l(n,35,0,"Meer activiteiten aan het ophalen")}),null)}function k(l){return i.Jb(0,[(l()(),i.ob(0,0,null,null,1,"app-activities",[],null,null,null,m,v)),i.nb(1,49152,null,0,g,[c.a,h.b],null,null)],null,null)}var x=i.kb("app-activities",g,k,{},{},[]);const y=()=>t.e(18).then(t.bind(null,"OYrJ")).then(l=>l.ActivityPageModuleNgFactory);class ${}t.d(n,"ActivitiesPageModuleNgFactory",(function(){return A}));var A=i.lb(e,[],(function(l){return i.xb([i.yb(512,i.j,i.X,[[8,[u.a,x]],[3,i.j],i.v]),i.yb(4608,a.l,a.k,[i.s,[2,a.u]]),i.yb(4608,b.o,b.o,[]),i.yb(4608,s.c,s.c,[i.x,i.g]),i.yb(4608,s.Fb,s.Fb,[s.c,i.j,i.p]),i.yb(4608,s.Jb,s.Jb,[s.c,i.j,i.p]),i.yb(1073742336,a.b,a.b,[]),i.yb(1073742336,b.n,b.n,[]),i.yb(1073742336,b.f,b.f,[]),i.yb(1073742336,s.Cb,s.Cb,[]),i.yb(1073742336,r.o,r.o,[[2,r.t],[2,r.m]]),i.yb(1073742336,$,$,[]),i.yb(1073742336,e,e,[]),i.yb(1024,r.k,(function(){return[[{path:"",component:g},{path:":activity_id",loadChildren:y}]]}),[])])}))},zTOr:function(l,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("AytR"),e=t("8Y7J"),u=t("IheW");let o=(()=>{class l{constructor(l){this.http=l,this.url=i.a.API_URL}getPage(l,n,t="ASC",i=20){return this.http.get(`${this.url}activities?page=${n}&limit=${i}&showFuture=false&showPast=${l}&sortOrder=${t}`)}findById(l){return this.http.get(`${this.url}activities/${l}`)}getQuestions(l,n,t=20){return this.http.get(`${this.url}activity-questions?activity=${l}&page=${n}&limit=${t}`)}getQuestion(l){return this.http.get(`${this.url}activity-questions/${l}`)}getRegistration(l){return this.http.get(`${this.url}activity-registrations/${l}`)}getTotalQuestions(l){return this.http.get(`${this.url}activity-questions?activity=${l}&limit=0`)}createReservation(l,n){return this.http.post(`${this.url}activity-registrations`,{activityId:l,answers:n})}getRegisteredActivities(l,n){let t=`${this.url}activity-registrations`;const i=[];return null!=l&&i.push(`user=${l}`),null!=n&&i.push(`activity=${n}`),i.push("limit=1"),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}}return l.ngInjectableDef=e.Nb({factory:function(){return new l(e.Ob(u.c))},token:l,providedIn:"root"}),l})()}}]);